Application Overview
===================

This application is a League of Legends summoner profile viewer that combines multiple data sources to create an immersive, game-themed experience. The project fetches and displays player statistics, ranked information, and visual assets through a hybrid approach using the Riot Games API, Data Dragon CDN, and web scraping techniques.

Core Functionality
==================

The app allows users to:
- Search for League of Legends players by summoner name and region
- View detailed profile information including level, rank, LP, and win/loss records
- Display profile icons and champion images
- Monitor regional server status
- Save and persist summoner profiles across sessions
- Access profiles through an interactive "home room" interface

Data Sources and Integration
=============================

1. Riot Games API (Primary Official Source)
-------------------------------------------

The Riot API provides authoritative, real-time player data through a secure serverless function proxy.

Implementation: netlify/functions/riot-api.js
- Serverless edge function acting as secure API proxy
- Keeps RIOT_API_KEY hidden from client-side code
- Supports all 15 regional endpoints (NA1, EUW1, KR, etc.)
- Implements 5-minute response caching to optimize rate limits
- Returns structured JSON data with proper error handling

Key Endpoints Used:
a) Platform Status API (/lol/status/v4/platform-data)
   - Real-time server status monitoring
   - Maintenance and incident tracking
   - Auto-checks on page load and region changes

b) Summoner API (/lol/summoner/v4/summoners/by-name/{name})
   - Core account information retrieval
   - Returns: puuid, summoner ID, level, profileIconId
   - Used in both Summoner Selector and Home Room views

c) League API (/lol/league/v4/entries/by-summoner/{id})
   - Ranked queue statistics
   - Filters for RANKED_SOLO_5x5 queue
   - Provides tier, rank, LP, wins, and losses

Request Flow:
Frontend → Netlify redirect (/api/*) → Serverless function → Regional Riot API → Response with cache headers → Client display

Files: public/Summoner-Selector.html (lines 133-178), public/homeroom.html (lines 1226-1273), netlify/functions/riot-api.js

2. Data Dragon CDN (Static Asset Delivery)
-------------------------------------------

Data Dragon is Riot's official content delivery network for game assets. The app uses it to fetch visual resources without authentication requirements.

Base URL: https://ddragon.leagueoflegends.com/cdn/14.1.1/

Asset Types Fetched:
a) Profile Icons
   - Endpoint: /img/profileicon/{iconId}.png
   - Used to display summoner avatars
   - IconId obtained from Summoner API response
   - Updates dynamically when profile is loaded

b) Champion Portraits
   - Endpoint: /img/champion/{championName}.png
   - Powers champion selection in home room
   - 160+ champion images available

c) Champion Metadata
   - Endpoint: /data/en_US/champion.json
   - Complete champion roster with names and IDs
   - Used to populate champion selector dropdown
   - Parsed to build selectable champion list

Implementation Details:
- No authentication required (public CDN)
- Versioned URLs (14.1.1) ensure consistency
- Images loaded directly via <img src> tags
- Champion data fetched once and cached in memory

Files: public/homeroom.html (lines 1059, 1091, 1156, 1185, 1201)

3. Web Scraping (Supplementary Data Source)
--------------------------------------------

The scraper component fetches additional profile data not available through the official API by parsing League of Graphs HTML pages.

Implementation: public/league-scraper.html

Target: https://www.leagueofgraphs.com/summoner/na/{gameName}-{tagLine}

Proxy Layer:
- Uses allorigins.win proxy service to bypass CORS restrictions
- Fetches raw HTML from League of Graphs
- Parses response with DOMParser browser API

Data Extracted via CSS Selectors:
- .bannerSubtitle → Summoner level
- .leagueTier → Rank tier (Gold, Platinum, etc.)
- .leaguePoints → Current LP
- .wins → Total wins
- .losses → Total losses
- .summonerProfileImage img → Profile icon URL

Extraction Process:
1. User enters game name and tag (e.g., "Faker" + "#NA1")
2. Constructs League of Graphs URL with normalized name
3. Proxies request through allorigins.win
4. Parses HTML response into DOM document
5. Queries specific CSS selectors for stat elements
6. Extracts text content and cleans formatting
7. Displays in UI and stores to localStorage

Reliability Features:
- Automatic retry logic (retries once on failure)
- DNS/TLS preload optimization on page load
- Graceful error handling with user feedback
- Fallback to default icon if scrape fails

Status Check:
- Separate endpoint netlify/functions/checkStatus.js verifies Riot server availability
- Checks multiple regions simultaneously
- Enables/disables search form based on results
- Provides user feedback on regional outages

Files: public/league-scraper.html (lines 206-346), netlify/functions/checkStatus.js

Data Persistence and State Management
======================================

LocalStorage Integration:
- Key: "summonerData" or "selectedSummoner"
- Stores: name, tagLine, level, rank, LP, wins, losses, profileIconUrl, region, puuid
- Auto-saves before navigation to home room
- Auto-restores on page reload
- Enables seamless cross-page profile persistence

Security Architecture
=====================

API Key Protection:
- RIOT_API_KEY stored as environment variable in Netlify
- Never exposed to client-side JavaScript
- Serverless function acts as authentication gateway
- CORS handling via proxy architecture

Rate Limiting Strategy:
- Riot API limits: 100 requests/2 minutes (app-level), 20,000/10 seconds (method-level)
- 5-minute cache reduces redundant calls
- Status checks occur once per session
- Profile data cached locally after first fetch

Regional Support
================

Supported Regions (15):
- Americas: NA1, BR1, LA1, LA2
- Europe: EUW1, EUN1, TR1, RU
- Asia: KR, JP1, OC1, TW2, VN2, SG2, ME1

Each region has dedicated API endpoints with independent rate limit tracking.

Technology Stack Summary
========================

Data Retrieval:
- Riot Games API (official, authenticated, real-time)
- Data Dragon CDN (official, public, versioned assets)
- League of Graphs scraper (supplementary, HTML parsing)

Infrastructure:
- Netlify Edge Functions for serverless API proxy
- AllOrigins proxy for CORS-free web scraping
- localStorage for client-side persistence

Frontend:
- Vanilla JavaScript (no frameworks)
- DOMParser for HTML parsing
- Fetch API for all HTTP requests
- CSS Grid/Flexbox for responsive layouts

The hybrid approach ensures comprehensive data coverage: the Riot API provides authoritative player stats, Data Dragon delivers official visual assets, and the scraper supplements with community-aggregated statistics not exposed through official endpoints.
