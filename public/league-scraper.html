<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>League Search</title>
<style>
body { background:#0a0a0a; color:#0f0; font-family:monospace; }
input { width:300px; padding:6px; background:#111; color:#0f0; border:1px solid #0f0; }
button { padding:6px 12px; background:#0f0; color:#000; border:none; cursor:pointer; }
pre { margin-top:15px; white-space:pre-wrap; }
</style>
</head>
<body>
<h3>Search League of Graphs NA Rankings</h3>
<input id="search" placeholder="Enter summoner name">
<button onclick="runSearch()">Search</button>
<pre id="output"></pre>

<script>
async function fetchPage() {
  const url = "https://www.leagueofgraphs.com/rankings/summoners/na";
  const proxied = `https://corsproxy.io/?${encodeURIComponent(url)}`;
  const res = await fetch(proxied);
  if (!res.ok) throw new Error("Failed to load page");
  return await res.text();
}

async function runSearch() {
  const term = document.getElementById("search").value.trim().toLowerCase();
  const output = document.getElementById("output");
  output.textContent = "Searching...";

  try {
    const html = await fetchPage();
    // quick parse by regex since we canâ€™t use cheerio
    const matches = [...html.matchAll(/<a[^>]*href="\/summoner\/na\/([^"]+)"[^>]*>(.*?)<\/a>/gi)]
      .map(m => m[2].replace(/<[^>]+>/g, '').trim());

    const filtered = matches.filter(n => n.toLowerCase().includes(term));
    if (filtered.length === 0) {
      output.textContent = "No results found.";
    } else {
      output.textContent = filtered.join("\n");
    }
  } catch (err) {
    output.textContent = "Error: " + err.message;
  }
}
</script>
</body>
</html>
